#include <stdio.h>

/*Declaration of data type where 4 bytes are packed into an unsigned */
typedef unsigned packed_t;
/* Extract byte from word. Return as signed integer */
int xbyte(packed_t word, int bytenum);

int main(){
	packed_t w = 0x5500FFAA;
	printf("%x, 1 gives %d \n", w, xbyte(w, 1));
	printf("%x, 2 gives %d \n", w, xbyte(w, 2));
        printf("%x, 3 gives %d \n", w, xbyte(w, 3));
	printf("%x, 4 gives %d \n", w, xbyte(w, 4));
	printf("%x \n", 0x55);
        printf("%x \n", 0x00);
        printf("%x \n", 0xFF);
	printf("%x \n", 0xAA);

	return 0;
}

int xbyte(packed_t word, int bytenum)
{
	
        (word >> (bytenum << 3)) & 0xFF;
	
	/*unsigned s = (((word >> (bytenum << 3)) >> 3));
	s = s << 31;
	printf("   s = %.8x\n", s);
	(word >> (bytenum << 3)) & 0xFF; */
	 
}


/* w=0x5500FFAA, b=3, b<<3 = 24, s(3) = 0
 w 0101 0101 0000 0000 1111 1111 1010 1010
 *                                  >>  8b
 > 0000 0000 0000 0000 0000 0000 0101 0101
 *                                  >>   3
 3 0000 0000 0000 0000 0000 0000 0000 0000
 *                                  <<  31
 s 0000 0000 0000 0000 0000 0000 0000 0000
 * ***************************************
 w 0101 0101 0000 0000 1111 1111 1010 1010  
 *                                  >>  8b
 > 0000 0000 0000 0000 0000 0000 0101 0101
 * 
 ~ 1111 1111 1111 1111 1111 1111 1010 1010
 * 
 * 1111 1111 1111 1111 1111 1111 1010 1011 
*/

/* w=0x5500FFAA, b=1, b<<1 = 8, s(1) = 1
 w 0101 0101 0000 0000 1111 1111 1010 1010
 *                                  >>  8b
 > 0000 0000 0101 0101 0000 0000 1111 1111
 *                                  >>   3
 3 0000 0000 0000 0000 0000 0000 0000 0001
 *                                  <<  31
 s 1000 0000 0000 0000 0000 0000 0000 0000
 * *************************************** 
 w 0101 0101 0000 0000 1111 1111 1010 1010
 *                                   >> 8b
 > 0000 0000 0101 0101 0000 0000 1111 1111
 *                                       ~
 ~ 1111 1111 1010 1010 1111 1111 0000 0000
 *                                      +1
 2 1111 1111 1010 1010 1111 1111 0000 0001                                      
 * ***************************************
 2 1111 1111 1010 1010 1111 1111 0000 0001
 | 1000 0000 0000 0000 0000 0000 0000 0000
 b 1111 1111 1010 1010 1111 1111 0000 0001
 * 
*/
